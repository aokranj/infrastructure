<VirtualHost *:80>
    ServerName stg.aokranj.com

    DocumentRoot /data/ao-stg/stg.aokranj.com/public

    # World-writable directories (with upload permission) must not be allowed to execute PHP
    <DirectoryMatch "^/data/ao-stg/stg.aokranj.com/public/wp-content/uploads">
        php_admin_flag   engine       off
        AddType          text/plain   .php
    </DirectoryMatch>



    ### For system status logging
    #
    # We're using one of prod vhosts because tools.dev.aokranj.com requires SSO auth,
    # which we don't want to do on every request here (every minute).
    #
    <Location "/sys/server-status">
        SetHandler server-status

        <If "%{HTTP:X-Forwarded-For} =~ /^10\./">
            Require all granted
        </If>
        <Else>
            Require all denied
        </Else>
    </Location>
</VirtualHost>
